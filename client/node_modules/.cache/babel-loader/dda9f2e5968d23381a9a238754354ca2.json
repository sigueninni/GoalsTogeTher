{"ast":null,"code":"var _jsxFileName = \"/home/saadi/coursAlyra/OpiChain/client/src/pages/UserList.jsx\",\n  _s = $RefreshSig$();\nimport '../css/page/userList.css';\nimport { DataGrid } from '@mui/x-data-grid';\nimport { DeleteOutline } from '@mui/icons-material';\n//import { userRows } from \"../dummyData\";\nimport useEth from \"../contexts/EthContext/useEth\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction UserList() {\n  _s();\n  const [usersData, setUsersData] = useState([]);\n  const {\n    state: {\n      accounts,\n      contractSBT\n    }\n  } = useEth();\n  useEffect(() => {\n    let usersDataLcl = [];\n    if (contractSBT && contractSBT !== null && contractSBT !== void 0 && contractSBT.methods) {\n      (async function () {\n        let oldEvents = await contractSBT.getPastEvents('grantedOpiID', {\n          fromBlock: 0,\n          toBlock: 'latest'\n        });\n        oldEvents.forEach(event => {\n          usersDataLcl.push({\n            'OpiIdCounter': event.returnValues._newOpiProfile.OpiIdCounter,\n            'role': event.returnValues._newOpiProfile.role,\n            'gender': event.returnValues._newOpiProfile.gender,\n            'age': event.returnValues._newOpiProfile.age,\n            'isOpiIdGranted': event.returnValues._newOpiProfile.isOpiIdGranted,\n            'balance': '50 opi5',\n            'location': 'Paris,France'\n          }\n          //  event.returnValues._newOpiProfile,\n          );\n        });\n\n        setUsersData(usersDataLcl);\n      })();\n    }\n  }, [contractSBT, accounts]);\n  const getRoleById = role => {\n    return role === 0 ? 'Sounder' : 'Surveyed';\n  };\n  const getGenderById = gender => {\n    return gender === 0 ? 'Male' : 'Female';\n  };\n  const handleDelete = id => {\n    setUsersData(usersData.filter(item => item.OpiIdCounter !== id));\n  };\n  const columns = [{\n    field: \"OpiIdCounter\",\n    headerName: \"Opi Id\",\n    width: 90\n  }, {\n    field: \"user\",\n    headerName: \"User\",\n    width: 100,\n    renderCell: params => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userListUser\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"userListImg\",\n          src: \"https://gateway.pinata.cloud/ipfs/QmfGBsYqSpUA64SHHY8oe4fczuHZH2Anc4JsvcttSzq4NS/\" + params.row.OpiIdCounter.toString() + \".png\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 25\n        }, this), params.row.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 21\n      }, this);\n    }\n  }, {\n    field: \"role\",\n    headerName: \"role\",\n    width: 100,\n    renderCell: params => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userListUser\",\n        children: getRoleById(params.row.role)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this);\n    }\n  }, {\n    field: \"gender\",\n    headerName: \"Gender\",\n    width: 100,\n    renderCell: params => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userListUser\",\n        children: getGenderById(params.row.gender)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 21\n      }, this);\n    }\n  }, {\n    field: \"age\",\n    headerName: \"Age\",\n    width: 90\n  }, {\n    field: \"balance\",\n    headerName: \"Balance\",\n    width: 90\n  }, {\n    field: \"location\",\n    headerName: \"Location\",\n    width: 90\n  }, {\n    field: \"isOpiIdGranted\",\n    headerName: \"Opi Id Granted\",\n    width: 90\n  }, {\n    field: \"action\",\n    headerName: \"Action\",\n    width: 150,\n    renderCell: params => {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/user/\" + params.row.OpiIdCounter,\n          state: {\n            row: params.row\n          },\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"userListEdit\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(DeleteOutline, {\n          className: \"userListDelete\",\n          onClick: () => handleDelete(params.row.OpiIdCounter)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true);\n    }\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"userList\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"userListTitleContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"userListTitle\",\n        children: \"Create a new Opi member\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/newUser\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"userListAddButton\",\n          children: \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(DataGrid, {\n      rows: usersData,\n      disableSelectionOnClick: true,\n      columns: columns,\n      pageSize: 8,\n      checkboxSelection: true,\n      getRowId: row => row.OpiIdCounter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 9\n  }, this);\n}\n_s(UserList, \"PDGdHljGFz/lLzWvz+Yt70o2z1E=\", false, function () {\n  return [useEth];\n});\n_c = UserList;\nexport default UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["DataGrid","DeleteOutline","useEth","useState","useEffect","Link","UserList","usersData","setUsersData","state","accounts","contractSBT","usersDataLcl","methods","oldEvents","getPastEvents","fromBlock","toBlock","forEach","event","push","returnValues","_newOpiProfile","OpiIdCounter","role","gender","age","isOpiIdGranted","getRoleById","getGenderById","handleDelete","id","filter","item","columns","field","headerName","width","renderCell","params","row","toString","username"],"sources":["/home/saadi/coursAlyra/OpiChain/client/src/pages/UserList.jsx"],"sourcesContent":["\nimport '../css/page/userList.css'\nimport { DataGrid } from '@mui/x-data-grid';\nimport { DeleteOutline } from '@mui/icons-material';\n//import { userRows } from \"../dummyData\";\nimport useEth from \"../contexts/EthContext/useEth\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n\n\nfunction UserList() {\n\n\n    const [usersData, setUsersData] = useState([]);\n    const { state: { accounts, contractSBT } } = useEth();\n\n\n    useEffect(() => {\n        let usersDataLcl = [];\n\n        if (contractSBT && contractSBT?.methods) {\n            (async function () {\n\n                let oldEvents = await contractSBT.getPastEvents('grantedOpiID', {\n                    fromBlock: 0,\n                    toBlock: 'latest'\n                });\n\n                oldEvents.forEach(event => {\n                    usersDataLcl.push(\n                        {\n                            'OpiIdCounter': event.returnValues._newOpiProfile.OpiIdCounter,\n                            'role': event.returnValues._newOpiProfile.role,\n                            'gender': event.returnValues._newOpiProfile.gender,\n                            'age': event.returnValues._newOpiProfile.age,\n                            'isOpiIdGranted': event.returnValues._newOpiProfile.isOpiIdGranted,\n                            'balance': '50 opi5',\n                            'location': 'Paris,France'\n\n                        }\n                        //  event.returnValues._newOpiProfile,\n                    );\n\n                });\n                setUsersData(usersDataLcl);\n\n            })();\n        }\n\n    }, [contractSBT, accounts]);\n\n    const getRoleById = (role) => {\n        return (role === 0 ? 'Sounder' : 'Surveyed');\n    };\n\n    const getGenderById = (gender) => {\n        return (gender === 0 ? 'Male' : 'Female');\n    };\n\n\n    const handleDelete = (id) => {\n        setUsersData(usersData.filter((item) => item.OpiIdCounter !== id));\n    };\n\n    const columns = [\n        { field: \"OpiIdCounter\", headerName: \"Opi Id\", width: 90 },\n        {\n            field: \"user\",\n            headerName: \"User\",\n            width: 100,\n            renderCell: (params) => {\n                return (\n                    <div className=\"userListUser\">\n                        <img className=\"userListImg\" src={\"https://gateway.pinata.cloud/ipfs/QmfGBsYqSpUA64SHHY8oe4fczuHZH2Anc4JsvcttSzq4NS/\" + params.row.OpiIdCounter.toString() + \".png\"} alt=\"\" />\n                        {params.row.username}\n                    </div>\n                );\n            },\n        },\n        {\n            field: \"role\",\n            headerName: \"role\",\n            width: 100,\n            renderCell: (params) => {\n                return (\n                    <div className=\"userListUser\">\n                        {getRoleById(params.row.role)}\n                    </div>\n                );\n            },\n        },\n        {\n            field: \"gender\",\n            headerName: \"Gender\",\n            width: 100,\n            renderCell: (params) => {\n                return (\n                    <div className=\"userListUser\">\n                        {getGenderById(params.row.gender)}\n                    </div>\n                );\n            },\n        },\n        { field: \"age\", headerName: \"Age\", width: 90 },\n        { field: \"balance\", headerName: \"Balance\", width: 90 },\n        { field: \"location\", headerName: \"Location\", width: 90 },\n        { field: \"isOpiIdGranted\", headerName: \"Opi Id Granted\", width: 90 },\n        {\n            field: \"action\",\n            headerName: \"Action\",\n            width: 150,\n            renderCell: (params) => {\n                return (\n                    <>\n                        <Link to={\"/user/\" + params.row.OpiIdCounter} state={{ row: params.row }}>\n                            <button className=\"userListEdit\">Edit</button>\n                        </Link>\n                        <DeleteOutline\n                            className=\"userListDelete\"\n                            onClick={() => handleDelete(params.row.OpiIdCounter)}\n                        />\n                    </>\n                );\n            },\n        },\n    ];\n\n    return (\n\n        <div className=\"userList\">\n            <div className=\"userListTitleContainer\">\n                <h1 className=\"userListTitle\">Create a new Opi member</h1>\n                <Link to=\"/newUser\">\n                    <button className=\"userListAddButton\">Create</button>\n                </Link>\n            </div>\n            <DataGrid\n                rows={usersData}\n                disableSelectionOnClick\n                columns={columns}\n                pageSize={8}\n                checkboxSelection\n                getRowId={(row) => row.OpiIdCounter}\n            />\n        </div>\n    );\n}\n\nexport default UserList;"],"mappings":";;AACA,OAAO,0BAA0B;AACjC,SAASA,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,aAAa,QAAQ,qBAAqB;AACnD;AACA,OAAOC,MAAM,MAAM,+BAA+B;AAClD,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,IAAI,QAAQ,kBAAkB;AAAC;AAAA;AAGxC,SAASC,QAAQ,GAAG;EAAA;EAGhB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM;IAAEM,KAAK,EAAE;MAAEC,QAAQ;MAAEC;IAAY;EAAE,CAAC,GAAGT,MAAM,EAAE;EAGrDE,SAAS,CAAC,MAAM;IACZ,IAAIQ,YAAY,GAAG,EAAE;IAErB,IAAID,WAAW,IAAIA,WAAW,aAAXA,WAAW,eAAXA,WAAW,CAAEE,OAAO,EAAE;MACrC,CAAC,kBAAkB;QAEf,IAAIC,SAAS,GAAG,MAAMH,WAAW,CAACI,aAAa,CAAC,cAAc,EAAE;UAC5DC,SAAS,EAAE,CAAC;UACZC,OAAO,EAAE;QACb,CAAC,CAAC;QAEFH,SAAS,CAACI,OAAO,CAACC,KAAK,IAAI;UACvBP,YAAY,CAACQ,IAAI,CACb;YACI,cAAc,EAAED,KAAK,CAACE,YAAY,CAACC,cAAc,CAACC,YAAY;YAC9D,MAAM,EAAEJ,KAAK,CAACE,YAAY,CAACC,cAAc,CAACE,IAAI;YAC9C,QAAQ,EAAEL,KAAK,CAACE,YAAY,CAACC,cAAc,CAACG,MAAM;YAClD,KAAK,EAAEN,KAAK,CAACE,YAAY,CAACC,cAAc,CAACI,GAAG;YAC5C,gBAAgB,EAAEP,KAAK,CAACE,YAAY,CAACC,cAAc,CAACK,cAAc;YAClE,SAAS,EAAE,SAAS;YACpB,UAAU,EAAE;UAEhB;UACA;UAAA,CACH;QAEL,CAAC,CAAC;;QACFnB,YAAY,CAACI,YAAY,CAAC;MAE9B,CAAC,GAAG;IACR;EAEJ,CAAC,EAAE,CAACD,WAAW,EAAED,QAAQ,CAAC,CAAC;EAE3B,MAAMkB,WAAW,GAAIJ,IAAI,IAAK;IAC1B,OAAQA,IAAI,KAAK,CAAC,GAAG,SAAS,GAAG,UAAU;EAC/C,CAAC;EAED,MAAMK,aAAa,GAAIJ,MAAM,IAAK;IAC9B,OAAQA,MAAM,KAAK,CAAC,GAAG,MAAM,GAAG,QAAQ;EAC5C,CAAC;EAGD,MAAMK,YAAY,GAAIC,EAAE,IAAK;IACzBvB,YAAY,CAACD,SAAS,CAACyB,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACV,YAAY,KAAKQ,EAAE,CAAC,CAAC;EACtE,CAAC;EAED,MAAMG,OAAO,GAAG,CACZ;IAAEC,KAAK,EAAE,cAAc;IAAEC,UAAU,EAAE,QAAQ;IAAEC,KAAK,EAAE;EAAG,CAAC,EAC1D;IACIF,KAAK,EAAE,MAAM;IACbC,UAAU,EAAE,MAAM;IAClBC,KAAK,EAAE,GAAG;IACVC,UAAU,EAAGC,MAAM,IAAK;MACpB,oBACI;QAAK,SAAS,EAAC,cAAc;QAAA,wBACzB;UAAK,SAAS,EAAC,aAAa;UAAC,GAAG,EAAE,mFAAmF,GAAGA,MAAM,CAACC,GAAG,CAACjB,YAAY,CAACkB,QAAQ,EAAE,GAAG,MAAO;UAAC,GAAG,EAAC;QAAE;UAAA;UAAA;UAAA;QAAA,QAAG,EAC7KF,MAAM,CAACC,GAAG,CAACE,QAAQ;MAAA;QAAA;QAAA;QAAA;MAAA,QAClB;IAEd;EACJ,CAAC,EACD;IACIP,KAAK,EAAE,MAAM;IACbC,UAAU,EAAE,MAAM;IAClBC,KAAK,EAAE,GAAG;IACVC,UAAU,EAAGC,MAAM,IAAK;MACpB,oBACI;QAAK,SAAS,EAAC,cAAc;QAAA,UACxBX,WAAW,CAACW,MAAM,CAACC,GAAG,CAAChB,IAAI;MAAC;QAAA;QAAA;QAAA;MAAA,QAC3B;IAEd;EACJ,CAAC,EACD;IACIW,KAAK,EAAE,QAAQ;IACfC,UAAU,EAAE,QAAQ;IACpBC,KAAK,EAAE,GAAG;IACVC,UAAU,EAAGC,MAAM,IAAK;MACpB,oBACI;QAAK,SAAS,EAAC,cAAc;QAAA,UACxBV,aAAa,CAACU,MAAM,CAACC,GAAG,CAACf,MAAM;MAAC;QAAA;QAAA;QAAA;MAAA,QAC/B;IAEd;EACJ,CAAC,EACD;IAAEU,KAAK,EAAE,KAAK;IAAEC,UAAU,EAAE,KAAK;IAAEC,KAAK,EAAE;EAAG,CAAC,EAC9C;IAAEF,KAAK,EAAE,SAAS;IAAEC,UAAU,EAAE,SAAS;IAAEC,KAAK,EAAE;EAAG,CAAC,EACtD;IAAEF,KAAK,EAAE,UAAU;IAAEC,UAAU,EAAE,UAAU;IAAEC,KAAK,EAAE;EAAG,CAAC,EACxD;IAAEF,KAAK,EAAE,gBAAgB;IAAEC,UAAU,EAAE,gBAAgB;IAAEC,KAAK,EAAE;EAAG,CAAC,EACpE;IACIF,KAAK,EAAE,QAAQ;IACfC,UAAU,EAAE,QAAQ;IACpBC,KAAK,EAAE,GAAG;IACVC,UAAU,EAAGC,MAAM,IAAK;MACpB,oBACI;QAAA,wBACI,QAAC,IAAI;UAAC,EAAE,EAAE,QAAQ,GAAGA,MAAM,CAACC,GAAG,CAACjB,YAAa;UAAC,KAAK,EAAE;YAAEiB,GAAG,EAAED,MAAM,CAACC;UAAI,CAAE;UAAA,uBACrE;YAAQ,SAAS,EAAC,cAAc;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAc;UAAA;UAAA;UAAA;QAAA,QAC3C,eACP,QAAC,aAAa;UACV,SAAS,EAAC,gBAAgB;UAC1B,OAAO,EAAE,MAAMV,YAAY,CAACS,MAAM,CAACC,GAAG,CAACjB,YAAY;QAAE;UAAA;UAAA;UAAA;QAAA,QACvD;MAAA,gBACH;IAEX;EACJ,CAAC,CACJ;EAED,oBAEI;IAAK,SAAS,EAAC,UAAU;IAAA,wBACrB;MAAK,SAAS,EAAC,wBAAwB;MAAA,wBACnC;QAAI,SAAS,EAAC,eAAe;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAA6B,eAC1D,QAAC,IAAI;QAAC,EAAE,EAAC,UAAU;QAAA,uBACf;UAAQ,SAAS,EAAC,mBAAmB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAgB;QAAA;QAAA;QAAA;MAAA,QAClD;IAAA;MAAA;MAAA;MAAA;IAAA,QACL,eACN,QAAC,QAAQ;MACL,IAAI,EAAEhB,SAAU;MAChB,uBAAuB;MACvB,OAAO,EAAE2B,OAAQ;MACjB,QAAQ,EAAE,CAAE;MACZ,iBAAiB;MACjB,QAAQ,EAAGM,GAAG,IAAKA,GAAG,CAACjB;IAAa;MAAA;MAAA;MAAA;IAAA,QACtC;EAAA;IAAA;IAAA;IAAA;EAAA,QACA;AAEd;AAAC,GAxIQjB,QAAQ;EAAA,QAIgCJ,MAAM;AAAA;AAAA,KAJ9CI,QAAQ;AA0IjB,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module"}