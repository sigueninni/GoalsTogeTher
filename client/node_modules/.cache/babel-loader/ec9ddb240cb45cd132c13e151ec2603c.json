{"ast":null,"code":"var _jsxFileName = \"/home/saadi/coursAlyra/OpiChain/client/src/pages/UserList.jsx\",\n  _s = $RefreshSig$();\n// import \"./userList.css\";\nimport '../css/page/userList.css';\nimport { DataGrid } from '@mui/x-data-grid';\nimport { DeleteOutline } from '@mui/icons-material';\n//import { userRows } from \"../dummyData\";\nimport useEth from \"../contexts/EthContext/useEth\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserList() {\n  _s();\n  const [usersData, setUsersData] = useState([]);\n  const {\n    state: {\n      accounts,\n      contractSBT\n    }\n  } = useEth();\n  useEffect(() => {\n    let usersDataLcl = [];\n    if (contractSBT && contractSBT !== null && contractSBT !== void 0 && contractSBT.methods) {\n      (async function () {\n        let oldEvents = await contractSBT.getPastEvents('grantedOpiID', {\n          fromBlock: 0,\n          toBlock: 'latest'\n        });\n        oldEvents.forEach(event => {\n          usersDataLcl.push(event.returnValues._newOpiProfile);\n        });\n        setUsersData(usersDataLcl);\n      })();\n    }\n  }, [contractSBT, accounts]);\n  const getRoleById = role => {\n    return role === 0 ? 'Sounder' : 'Surveyed';\n  };\n  const getGenderById = gender => {\n    return gender === 0 ? 'Male' : 'Female';\n  };\n  const handleDelete = id => {\n    setUsersData(usersData.filter(item => item.OpiIdCounter !== id));\n  };\n  const columns = [{\n    field: \"OpiIdCounter\",\n    headerName: \"Opi Id\",\n    width: 90\n  }, {\n    field: \"user\",\n    headerName: \"User\",\n    width: 200,\n    renderCell: params => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userListUser\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"userListImg\",\n          src: params.row.avatar,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 25\n        }, this), params.row.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this);\n    }\n  }\n  /*     { field: \"email\", headerName: \"Email\", width: 200 },\n      {\n          field: \"status\",\n          headerName: \"Status\",\n          width: 120,\n      },\n      {\n          field: \"transaction\",\n          headerName: \"Transaction Volume\",\n          width: 160,\n      },\n      {\n          field: \"action\",\n          headerName: \"Action\",\n          width: 150,\n          renderCell: (params) => {\n              return (\n                  <>\n                      <Link to={\"/user/\" + params.row.id}>\n                          <button className=\"userListEdit\">Edit</button>\n                      </Link>\n                      <DeleteOutline\n                          className=\"userListDelete\"\n                          onClick={() => handleDelete(params.row.id)}\n                      />\n                  </>\n              );\n          },\n      }, */];\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"userList\",\n    children: /*#__PURE__*/_jsxDEV(DataGrid, {\n      rows: usersData,\n      disableSelectionOnClick: true,\n      columns: columns,\n      pageSize: 8,\n      checkboxSelection: true,\n      getRowId: row => row.OpiIdCounter\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n}\n_s(UserList, \"PDGdHljGFz/lLzWvz+Yt70o2z1E=\", false, function () {\n  return [useEth];\n});\n_c = UserList;\nexport default UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["DataGrid","DeleteOutline","useEth","useState","useEffect","Link","UserList","usersData","setUsersData","state","accounts","contractSBT","usersDataLcl","methods","oldEvents","getPastEvents","fromBlock","toBlock","forEach","event","push","returnValues","_newOpiProfile","getRoleById","role","getGenderById","gender","handleDelete","id","filter","item","OpiIdCounter","columns","field","headerName","width","renderCell","params","row","avatar","username"],"sources":["/home/saadi/coursAlyra/OpiChain/client/src/pages/UserList.jsx"],"sourcesContent":["// import \"./userList.css\";\nimport '../css/page/userList.css'\nimport { DataGrid } from '@mui/x-data-grid';\nimport { DeleteOutline } from '@mui/icons-material';\n//import { userRows } from \"../dummyData\";\nimport useEth from \"../contexts/EthContext/useEth\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n\n\nfunction UserList() {\n\n\n    const [usersData, setUsersData] = useState([]);\n    const { state: { accounts, contractSBT } } = useEth();\n\n\n    useEffect(() => {\n        let usersDataLcl = [];\n\n        if (contractSBT && contractSBT?.methods) {\n            (async function () {\n\n                let oldEvents = await contractSBT.getPastEvents('grantedOpiID', {\n                    fromBlock: 0,\n                    toBlock: 'latest'\n                });\n\n                oldEvents.forEach(event => {\n                    usersDataLcl.push(\n                        event.returnValues._newOpiProfile,\n                    );\n\n                });\n                setUsersData(usersDataLcl);\n\n            })();\n        }\n\n    }, [contractSBT, accounts]);\n\n    const getRoleById = (role) => {\n        return (role === 0 ? 'Sounder' : 'Surveyed');\n    };\n\n    const getGenderById = (gender) => {\n        return (gender === 0 ? 'Male' : 'Female');\n    };\n\n\n    const handleDelete = (id) => {\n        setUsersData(usersData.filter((item) => item.OpiIdCounter !== id));\n    };\n\n    const columns = [\n        { field: \"OpiIdCounter\", headerName: \"Opi Id\", width: 90 },\n        {\n            field: \"user\",\n            headerName: \"User\",\n            width: 200,\n            renderCell: (params) => {\n                return (\n                    <div className=\"userListUser\">\n                        <img className=\"userListImg\" src={params.row.avatar} alt=\"\" />\n                        {params.row.username}\n                    </div>\n                );\n            },\n        },\n        /*     { field: \"email\", headerName: \"Email\", width: 200 },\n            {\n                field: \"status\",\n                headerName: \"Status\",\n                width: 120,\n            },\n            {\n                field: \"transaction\",\n                headerName: \"Transaction Volume\",\n                width: 160,\n            },\n            {\n                field: \"action\",\n                headerName: \"Action\",\n                width: 150,\n                renderCell: (params) => {\n                    return (\n                        <>\n                            <Link to={\"/user/\" + params.row.id}>\n                                <button className=\"userListEdit\">Edit</button>\n                            </Link>\n                            <DeleteOutline\n                                className=\"userListDelete\"\n                                onClick={() => handleDelete(params.row.id)}\n                            />\n                        </>\n                    );\n                },\n            }, */\n    ];\n\n    return (\n        <div className=\"userList\">\n            <DataGrid\n                rows={usersData}\n                disableSelectionOnClick\n                columns={columns}\n                pageSize={8}\n                checkboxSelection\n                getRowId={(row) => row.OpiIdCounter}\n            />\n        </div>\n    );\n}\n\nexport default UserList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}