{"ast":null,"code":"var _jsxFileName = \"/home/saadi/coursAlyra/OpiChain/client/src/pages/UserList.jsx\",\n  _s = $RefreshSig$();\n// import \"./userList.css\";\nimport '../css/page/userList.css';\nimport { DataGrid } from '@mui/x-data-grid';\nimport { DeleteOutline } from '@mui/icons-material';\n//import { userRows } from \"../dummyData\";\nimport useEth from \"../contexts/EthContext/useEth\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UserList() {\n  _s();\n  const [usersData, setUsersData] = useState([]);\n  const {\n    state: {\n      accounts,\n      contractSBT\n    }\n  } = useEth();\n  useEffect(() => {\n    if (contractSBT && contractSBT !== null && contractSBT !== void 0 && contractSBT.methods) {\n      (async function () {\n        let usersDataLcl2;\n        let oldEvents = await contractSBT.getPastEvents('grantedOpiID', {\n          fromBlock: 0,\n          toBlock: 'latest'\n        });\n        oldEvents.forEach(event => {\n          usersDataLcl2.push(event.returnValues._newOpiProfile);\n        });\n        setUsersData(usersDataLcl2);\n      })();\n    }\n  }, [contractSBT, accounts]);\n  const handleDelete = id => {\n    setUsersData(usersData.filter(item => item.OpiIdCounter !== id));\n  };\n  const columns = [{\n    field: \"OpiIdCounter\",\n    headerName: \"Opi Id\",\n    width: 90\n  } /* ,\n    {\n    field: \"user\",\n    headerName: \"User\",\n    width: 200,\n    renderCell: (params) => {\n    return (\n    <div className=\"userListUser\">\n    <img className=\"userListImg\" src={params.row.avatar} alt=\"\" />\n    {params.row.username}\n    </div>\n    );\n    },\n    },\n    { field: \"email\", headerName: \"Email\", width: 200 },\n    {\n    field: \"status\",\n    headerName: \"Status\",\n    width: 120,\n    },\n    {\n    field: \"transaction\",\n    headerName: \"Transaction Volume\",\n    width: 160,\n    },\n    {\n    field: \"action\",\n    headerName: \"Action\",\n    width: 150,\n    renderCell: (params) => {\n    return (\n    <>\n    <Link to={\"/user/\" + params.row.id}>\n    <button className=\"userListEdit\">Edit</button>\n    </Link>\n    <DeleteOutline\n    className=\"userListDelete\"\n    onClick={() => handleDelete(params.row.id)}\n    />\n    </>\n    );\n    },\n    }, */];\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"userList\",\n    children: /*#__PURE__*/_jsxDEV(DataGrid, {\n      rows: usersDataLcl,\n      disableSelectionOnClick: true,\n      columns: columns,\n      pageSize: 8,\n      checkboxSelection: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n}\n_s(UserList, \"PDGdHljGFz/lLzWvz+Yt70o2z1E=\", false, function () {\n  return [useEth];\n});\n_c = UserList;\nexport default UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["DataGrid","DeleteOutline","useEth","useState","useEffect","Link","UserList","usersData","setUsersData","state","accounts","contractSBT","methods","usersDataLcl2","oldEvents","getPastEvents","fromBlock","toBlock","forEach","event","push","returnValues","_newOpiProfile","handleDelete","id","filter","item","OpiIdCounter","columns","field","headerName","width","usersDataLcl"],"sources":["/home/saadi/coursAlyra/OpiChain/client/src/pages/UserList.jsx"],"sourcesContent":["// import \"./userList.css\";\nimport '../css/page/userList.css'\nimport { DataGrid } from '@mui/x-data-grid';\nimport { DeleteOutline } from '@mui/icons-material';\n//import { userRows } from \"../dummyData\";\nimport useEth from \"../contexts/EthContext/useEth\";\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\n\n\nfunction UserList() {\n\n    \n    const [usersData, setUsersData] = useState([]);\n    const { state: { accounts, contractSBT } } = useEth();\n\n\n    useEffect(() => {\n        \n\n        if (contractSBT && contractSBT?.methods) {\n          (async function () {\n            let usersDataLcl2 ;\n            let oldEvents = await contractSBT.getPastEvents('grantedOpiID', {\n              fromBlock: 0,\n              toBlock: 'latest'\n            });\n    \n            oldEvents.forEach(event => {\n                usersDataLcl2.push(\n                event.returnValues._newOpiProfile,\n              );\n    \n            });\n            setUsersData(usersDataLcl2);\n          \n          })();\n        }\n    \n      }, [contractSBT, accounts]);\n\n\n    const handleDelete = (id) => {\n        setUsersData(usersData.filter((item) => item.OpiIdCounter !== id));\n    };\n\n    const columns = [\n        { field: \"OpiIdCounter\", headerName: \"Opi Id\", width: 90 }/* ,\n        {\n            field: \"user\",\n            headerName: \"User\",\n            width: 200,\n            renderCell: (params) => {\n                return (\n                    <div className=\"userListUser\">\n                        <img className=\"userListImg\" src={params.row.avatar} alt=\"\" />\n                        {params.row.username}\n                    </div>\n                );\n            },\n        },\n        { field: \"email\", headerName: \"Email\", width: 200 },\n        {\n            field: \"status\",\n            headerName: \"Status\",\n            width: 120,\n        },\n        {\n            field: \"transaction\",\n            headerName: \"Transaction Volume\",\n            width: 160,\n        },\n        {\n            field: \"action\",\n            headerName: \"Action\",\n            width: 150,\n            renderCell: (params) => {\n                return (\n                    <>\n                        <Link to={\"/user/\" + params.row.id}>\n                            <button className=\"userListEdit\">Edit</button>\n                        </Link>\n                        <DeleteOutline\n                            className=\"userListDelete\"\n                            onClick={() => handleDelete(params.row.id)}\n                        />\n                    </>\n                );\n            },\n        }, */\n    ];\n\n    return (\n        <div className=\"userList\">\n            <DataGrid\n                rows={usersDataLcl}\n                disableSelectionOnClick\n                columns={columns}\n                pageSize={8}\n                checkboxSelection\n            />\n        </div>\n    );\n}\n\nexport default UserList;"],"mappings":";;AAAA;AACA,OAAO,0BAA0B;AACjC,SAASA,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,aAAa,QAAQ,qBAAqB;AACnD;AACA,OAAOC,MAAM,MAAM,+BAA+B;AAClD,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,IAAI,QAAQ,kBAAkB;AAAC;AAGxC,SAASC,QAAQ,GAAG;EAAA;EAGhB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM;IAAEM,KAAK,EAAE;MAAEC,QAAQ;MAAEC;IAAY;EAAE,CAAC,GAAGT,MAAM,EAAE;EAGrDE,SAAS,CAAC,MAAM;IAGZ,IAAIO,WAAW,IAAIA,WAAW,aAAXA,WAAW,eAAXA,WAAW,CAAEC,OAAO,EAAE;MACvC,CAAC,kBAAkB;QACjB,IAAIC,aAAa;QACjB,IAAIC,SAAS,GAAG,MAAMH,WAAW,CAACI,aAAa,CAAC,cAAc,EAAE;UAC9DC,SAAS,EAAE,CAAC;UACZC,OAAO,EAAE;QACX,CAAC,CAAC;QAEFH,SAAS,CAACI,OAAO,CAACC,KAAK,IAAI;UACvBN,aAAa,CAACO,IAAI,CAClBD,KAAK,CAACE,YAAY,CAACC,cAAc,CAClC;QAEH,CAAC,CAAC;QACFd,YAAY,CAACK,aAAa,CAAC;MAE7B,CAAC,GAAG;IACN;EAEF,CAAC,EAAE,CAACF,WAAW,EAAED,QAAQ,CAAC,CAAC;EAG7B,MAAMa,YAAY,GAAIC,EAAE,IAAK;IACzBhB,YAAY,CAACD,SAAS,CAACkB,MAAM,CAAEC,IAAI,IAAKA,IAAI,CAACC,YAAY,KAAKH,EAAE,CAAC,CAAC;EACtE,CAAC;EAED,MAAMI,OAAO,GAAG,CACZ;IAAEC,KAAK,EAAE,cAAc;IAAEC,UAAU,EAAE,QAAQ;IAAEC,KAAK,EAAE;EAAG,CAAC;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA1CkE,CA2C7D;;EAED,oBACI;IAAK,SAAS,EAAC,UAAU;IAAA,uBACrB,QAAC,QAAQ;MACL,IAAI,EAAEC,YAAa;MACnB,uBAAuB;MACvB,OAAO,EAAEJ,OAAQ;MACjB,QAAQ,EAAE,CAAE;MACZ,iBAAiB;IAAA;MAAA;MAAA;MAAA;IAAA;EACnB;IAAA;IAAA;IAAA;EAAA,QACA;AAEd;AAAC,GA7FQtB,QAAQ;EAAA,QAIgCJ,MAAM;AAAA;AAAA,KAJ9CI,QAAQ;AA+FjB,eAAeA,QAAQ;AAAC;AAAA"},"metadata":{},"sourceType":"module"}